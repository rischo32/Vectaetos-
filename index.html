<!DOCTYPE html>
<html lang="sk">
<head>
<meta charset="UTF-8">
<title>VECTAETOS ‚Äî Epistemick√© Pole</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="VECTAETOS - Projekcia epistemick√©ho poƒæa. Nie odpoveƒè, ale lep≈°ia ot√°zka.">

<link rel="icon" href="data:image/svg+xml,
<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'>
<text y='.9em' font-size='90'>üóø</text>
</svg>">

<style>
* { margin:0; padding:0; box-sizing:border-box; }
body{
  background:#0a0a0a;
  color:#fff;
  font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI";
  line-height:1.6;
}
.hero{
  position:relative;
  min-height:75vh;
  display:flex;
  align-items:center;
  justify-content:center;
  overflow:hidden;
  padding:40px 20px;
}
.graph-container{
  width:100%;
  max-width:650px;
  aspect-ratio:1;
}
.hero-overlay{
  position:absolute;
  bottom:40px;
  left:50%;
  transform:translateX(-50%);
  text-align:center;
  pointer-events:none;
}
.hero-overlay h1{
  font-size:clamp(32px,8vw,56px);
  font-weight:200;
  letter-spacing:0.2em;
  text-shadow:0 0 40px rgba(0,0,0,.9);
}
.hero-overlay .tagline{
  font-size:14px;
  color:#888;
  letter-spacing:.15em;
  text-transform:uppercase;
}
.container{
  max-width:800px;
  margin:auto;
  padding:60px 20px;
}
.instruction{
  background:rgba(255,255,255,.02);
  border:1px solid rgba(255,255,255,.08);
  border-radius:16px;
  padding:32px;
  margin-bottom:48px;
}
.instruction h2{
  color:#6c6;
  font-weight:300;
  margin-bottom:20px;
}
.highlight{
  color:#6c6;
  background:rgba(100,200,100,.1);
  padding:2px 6px;
  border-radius:4px;
}
textarea{
  width:100%;
  min-height:140px;
  background:rgba(255,255,255,.03);
  border:1px solid rgba(255,255,255,.1);
  border-radius:12px;
  padding:20px;
  color:#fff;
  font-size:16px;
}
button{
  width:100%;
  margin-top:20px;
  padding:18px;
  background:rgba(100,200,100,.15);
  border:1px solid rgba(100,200,100,.3);
  border-radius:12px;
  cursor:pointer;
}
button:hover{
  background:rgba(100,200,100,.25);
}
.projection-result{
  display:none;
  margin-top:60px;
  padding:40px;
  background:rgba(255,255,255,.02);
  border:1px solid rgba(100,200,100,.2);
  border-radius:16px;
}
.projection-result.show{
  display:block;
}
.tension-cards{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(180px,1fr));
  gap:16px;
  margin-bottom:32px;
}
.tension-card{
  padding:16px;
  background:rgba(255,255,255,.02);
  border-left:4px solid;
}
.bar{
  height:4px;
  background:rgba(255,255,255,.1);
  margin-top:8px;
}
.bar-fill{
  height:100%;
  width:0%;
  background:currentColor;
  transition:width 1s ease;
}
.projection-text{
  background:rgba(0,0,0,.4);
  padding:24px;
  border-left:4px solid rgba(100,200,100,.4);
}
svg text{ pointer-events:none; }
.glow-circle{ transition:all 1s ease; }
.main-circle{ transition:all 1s ease; }
line{ transition:stroke-width 1s ease, opacity 1s ease, stroke 1s ease; }
.rune{ font-size:24px; position:absolute; }
</style>
</head>

<body>
<section class="hero">
<div class="graph-container">
<svg id="tension-graph" viewBox="0 0 600 600">
<defs>
<filter id="glow">
<feGaussianBlur stdDeviation="3"/>
</filter>
<marker id="rune-‚óØ" viewBox="0 0 20 20" refX="10" refY="10" markerWidth="20" markerHeight="20">
<circle cx="10" cy="10" r="8" fill="#6c6" opacity="0.7"/>
</marker>
<marker id="rune-‚ñ≥" viewBox="0 0 20 20" refX="10" refY="10" markerWidth="20" markerHeight="20">
<polygon points="10,2 18,18 2,18" fill="#f88" opacity="0.7"/>
</marker>
<marker id="rune-‚óá" viewBox="0 0 20 20" refX="10" refY="10" markerWidth="20" markerHeight="20">
<rect x="5" y="5" width="10" height="10" transform="rotate(45 10 10)" fill="#8cf" opacity="0.7"/>
</marker>
<marker id="rune-‚äò" viewBox="0 0 20 20" refX="10" refY="10" markerWidth="20" markerHeight="20">
<circle cx="10" cy="10" r="8" fill="none" stroke="#f44" stroke-width="2" opacity="0.7"/>
</marker>
</defs>

<g id="connections"></g>
<g id="nodes">
<!-- AXIOM NODES -->
<g class="axiom-node" data-axiom="VER" data-x="300" data-y="50">
<circle cx="300" cy="50" r="15" class="glow-circle" fill="#33ccff" opacity=".3" filter="url(#glow)"/>
<circle cx="300" cy="50" r="10" class="main-circle" fill="#33ccff"/>
<text x="300" y="30" text-anchor="middle" fill="#33ccff">VER</text>
</g>
<g class="axiom-node" data-axiom="LEX" data-x="480" data-y="150">
<circle cx="480" cy="150" r="15" class="glow-circle" fill="#ffaa00" opacity=".3" filter="url(#glow)"/>
<circle cx="480" cy="150" r="10" class="main-circle" fill="#ffaa00"/>
<text x="510" y="155" fill="#ffaa00">LEX</text>
</g>
<g class="axiom-node" data-axiom="LIB" data-x="530" data-y="300">
<circle cx="530" cy="300" r="15" class="glow-circle" fill="#66ff66" opacity=".3" filter="url(#glow)"/>
<circle cx="530" cy="300" r="10" class="main-circle" fill="#66ff66"/>
<text x="555" y="305" fill="#66ff66">LIB</text>
</g>
<g class="axiom-node" data-axiom="CRE" data-x="480" data-y="450">
<circle cx="480" cy="450" r="15" class="glow-circle" fill="#ff8800" opacity=".3" filter="url(#glow)"/>
<circle cx="480" cy="450" r="10" class="main-circle" fill="#ff8800"/>
<text x="510" y="455" fill="#ff8800">CRE</text>
</g>
<g class="axiom-node" data-axiom="WIS" data-x="300" data-y="550">
<circle cx="300" cy="550" r="15" class="glow-circle" fill="#ff44aa" opacity=".3" filter="url(#glow)"/>
<circle cx="300" cy="550" r="10" class="main-circle" fill="#ff44aa"/>
<text x="300" y="575" text-anchor="middle" fill="#ff44aa">WIS</text>
</g>
<g class="axiom-node" data-axiom="REL" data-x="120" data-y="450">
<circle cx="120" cy="450" r="15" class="glow-circle" fill="#ff4444" opacity=".3" filter="url(#glow)"/>
<circle cx="120" cy="450" r="10" class="main-circle" fill="#ff4444"/>
<text x="90" y="455" text-anchor="end" fill="#ff4444">REL</text>
</g>
<g class="axiom-node" data-axiom="UNI" data-x="70" data-y="300">
<circle cx="70" cy="300" r="15" class="glow-circle" fill="#aa66ff" opacity=".3" filter="url(#glow)"/>
<circle cx="70" cy="300" r="10" class="main-circle" fill="#aa66ff"/>
<text x="45" y="305" text-anchor="end" fill="#aa66ff">UNI</text>
</g>
<g class="axiom-node" data-axiom="INT" data-x="120" data-y="150">
<circle cx="120" cy="150" r="15" class="glow-circle" fill="#ff5555" opacity=".3" filter="url(#glow)"/>
<circle cx="120" cy="150" r="10" class="main-circle" fill="#ff5555"/>
<text x="90" y="155" text-anchor="end" fill="#ff5555">INT</text>
</g>
</g>
</svg>
</div>
<div class="hero-overlay">
<h1>VECTAETOS</h1>
<div class="tagline">Kde prest√°vaj√∫ slov√°, s√∫ vz≈•ahy</div>
</div>
</section>

<div class="container">
<div class="instruction">
<h2>Toto nie je AI chatbot</h2>
<p>Toto je <span class="highlight">projekcia epistemick√©ho poƒæa</span>.</p>
<p>Neplat√≠≈° za odpoveƒè. Plat√≠≈° za <strong>videnie nap√§tia</strong>.</p>
</div>

<textarea id="query" placeholder="Sem nap√≠≈° svoj probl√©m‚Ä¶"></textarea>
<button id="submit-btn">Vlo≈æi≈• do poƒæa</button>

<div id="projection-result" class="projection-result">
<h3>Projekcia poƒæa</h3>
<div id="tension-cards" class="tension-cards"></div>
<div id="projection-text" class="projection-text"></div>
</div>
</div>

<script>
// ================= AXIOMS =================
const AXIOMS = {
  INT: { label: "Integrita", color: "#ff5555" },
  LEX: { label: "Lexik√°lna koherencia", color: "#ffaa00" },
  VER: { label: "Verifikovateƒænos≈•", color: "#33ccff" },
  LIB: { label: "Sloboda", color: "#66ff66" },
  UNI: { label: "Univerz√°lnos≈•", color: "#aa66ff" },
  REL: { label: "Relaƒçnos≈•", color: "#ff4444" },
  WIS: { label: "M√∫dros≈•", color: "#ff44aa" },
  CRE: { label: "Kreativita", color: "#ff8800" }
};

// ================= SIMULATION VORTEX =================
function simulateVortex(query) {
  // Simul√°cia nap√§t√≠ (n√°hodn√© hodnoty pre demo, nesk√¥r nahraƒè re√°lnym Vortexom)
  const tensionMatrix = {};
  const axioms = Object.keys(AXIOMS);
  const Œ∫ = 0.4; // Kritick√° hranica koherencie

  // Generovanie n√°hodnej matice nap√§t√≠ (0.1‚Äì0.9)
  for (let i = 0; i < axioms.length; i++) {
    tensionMatrix[axioms[i]] = {};
    for (let j = 0; j < axioms.length; j++) {
      if (i !== j) {
        tensionMatrix[axioms[i]][axioms[j]] = Math.random() * 0.8 + 0.1;
      }
    }
  }

  // Pridanie ≈°pecifick√Ωch pravidiel pre vstup
  if (/neviem|neistota/.test(query)) {
    tensionMatrix.WIS.VER = 0.9;
    tensionMatrix.INT.CRE = 0.2;
  }
  if (/rozhodnut|choice/.test(query)) {
    tensionMatrix.LIB.INT = 0.85;
    tensionMatrix.REL.UNI = 0.3;
  }

  // V√Ωpoƒçet glob√°lnej koherencie K(Œ¶)
  let K = 0;
  let edgeCount = 0;
  for (const i in tensionMatrix) {
    for (const j in tensionMatrix[i]) {
      K += tensionMatrix[i][j];
      edgeCount++;
    }
  }
  K /= edgeCount; // Priemern√° koherencia

  // Ak K(Œ¶) < Œ∫, nastav QE (ap√≥riu) pre v≈°etky hrany
  if (K < Œ∫) {
    for (const i in tensionMatrix) {
      for (const j in tensionMatrix[i]) {
        tensionMatrix[i][j] = -1; // QE marker
      }
    }
  }

  return { tensionMatrix, K };
}

// ================= RENDER GRAPH =================
function renderGraph(tensionMatrix) {
  const connections = document.getElementById("connections");
  connections.innerHTML = "";

  const axioms = Object.keys(AXIOMS);
  for (let i = 0; i < axioms.length; i++) {
    for (let j = i + 1; j < axioms.length; j++) {
      const a1 = axioms[i];
      const a2 = axioms[j];
      const tension = tensionMatrix[a1][a2];
      if (!tension) continue;

      const n1 = document.querySelector(`[data-axiom="${a1}"]`);
      const n2 = document.querySelector(`[data-axiom="${a2}"]`);
      const x1 = parseFloat(n1.dataset.x);
      const y1 = parseFloat(n1.dataset.y);
      const x2 = parseFloat(n2.dataset.x);
      const y2 = parseFloat(n2.dataset.y);

      const line = document.createElementNS("http://www.w3.org/2000/svg", "line");
      line.setAttribute("x1", x1);
      line.setAttribute("y1", y1);
      line.setAttribute("x2", x2);
      line.setAttribute("y2", y2);

      // Farba a hr√∫bka podƒæa nap√§tia
      if (tension === -1) {
        line.setAttribute("stroke", "#f44"); // QE (ƒçerven√°)
        line.setAttribute("stroke-width", "3");
        line.setAttribute("marker-end", "url(#rune-‚äò)");
      } else if (tension > 0.7) {
        line.setAttribute("stroke", "#6c6"); // AA (zelen√°)
        line.setAttribute("stroke-width", tension * 4);
        line.setAttribute("marker-end", "url(#rune-‚óØ)");
      } else if (tension > 0.5) {
        line.setAttribute("stroke", "#ffaa00"); // AN (≈ælt√°)
        line.setAttribute("stroke-width", tension * 3);
        line.setAttribute("marker-end", "url(#rune-‚ñ≥)");
      } else if (tension > 0.3) {
        line.setAttribute("stroke", "#33ccff"); // NA (modr√°)
        line.setAttribute("stroke-width", tension * 2);
        line.setAttribute("marker-end", "url(#rune-‚óá)");
      } else {
        line.setAttribute("stroke", "#888"); // NN (≈°ed√°)
        line.setAttribute("stroke-width", "1");
      }

      connections.appendChild(line);
    }
  }
}

// ================= UPDATE UI =================
function updateUI(tensionMatrix, K) {
  const axioms = Object.keys(AXIOMS);
  const cards = document.getElementById("tension-cards");
  cards.innerHTML = "";

  // Zobrazenie k√°rty pre ka≈æd√© axiomatick√© ≈•a≈æisko
  axioms.forEach(axiom => {
    const card = document.createElement("div");
    card.className = "tension-card";
    card.style.borderColor = AXIOMS[axiom].color;

    // Priemern√© nap√§tie pre dan√© ≈•a≈æisko
    let avgTension = 0;
    let count = 0;
    for (const other in tensionMatrix[axiom]) {
      avgTension += tensionMatrix[axiom][other];
      count++;
    }
    avgTension /= count;

    card.innerHTML = `
      <strong>${axiom}</strong>
      <div class="bar">
        <div class="bar-fill" style="width:${avgTension * 100}%;color:${AXIOMS[axiom].color}"></div>
      </div>
    `;
    cards.appendChild(card);
  });

  // Text projekcie
  const text = K < 0.4 ?
    "<p><em>Pole nedok√°≈æe udr≈æa≈• koherenciu. Tvoja ot√°zka rozb√≠ja jeho ≈°trukt√∫ru (QE).</em></p>" :
    "<p><em>Nap√§tie je viditeƒæn√©. Nie je to odpoveƒè, ale mapa mo≈ænost√≠.</em></p>";
  document.getElementById("projection-text").innerHTML = text;
}

// ================= MAIN LOGIC =================
document.getElementById("submit-btn").onclick = () => {
  const query = document.getElementById("query").value.trim();
  if (!query) return;

  // 1. Spust√≠me Simulation Vortex
  const { tensionMatrix, K } = simulateVortex(query);

  // 2. Vykresl√≠me graf
  renderGraph(tensionMatrix);

  // 3. Aktualizujeme UI
  updateUI(tensionMatrix, K);

  // 4. Zobraz√≠me v√Ωsledok
  document.getElementById("projection-result").classList.add("show");

  // 5. Po 15s sa projekcia uzavrie (Stav IV)
  setTimeout(() => {
    document.getElementById("projection-result").classList.remove("show");
    document.getElementById("query").value = "";
    const connections = document.getElementById("connections");
    connections.innerHTML = "";
  }, 15000);
};
</script>
</body>
</html>
