<!DOCTYPE html>
<html lang="sk">
<head>
<meta charset="UTF-8">
<title>VECTAETOS © — epistemic field</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
html,body{
  margin:0;
  padding:0;
  width:100%;
  height:100%;
  background:#000;
  overflow:hidden;
  font-family:system-ui, sans-serif;
  color:#aaa;
}

canvas{
  display:block;
}

#title{
  position:fixed;
  top:18px;
  width:100%;
  text-align:center;
  font-size:13px;
  letter-spacing:0.2em;
  opacity:0.55;
  pointer-events:none;
}

#ask{
  position:fixed;
  bottom:70px;
  left:50%;
  transform:translateX(-50%);
  width:88%;
  max-width:520px;
  padding:14px;
  background:rgba(255,255,255,0.05);
  color:#eee;
  border:1px solid rgba(255,255,255,0.15);
  outline:none;
  font-size:14px;
}

#hint{
  position:fixed;
  bottom:36px;
  width:100%;
  text-align:center;
  font-size:12px;
  opacity:0.5;
  pointer-events:none;
}

#mode{
  position:fixed;
  bottom:16px;
  width:100%;
  text-align:center;
  font-size:11px;
  opacity:0.35;
  pointer-events:none;
}
</style>
</head>

<body>
<div id="title">VECTAETOS © — epistemic field</div>

<canvas id="field"></canvas>

<input id="ask" placeholder="Formuluj impulz. Odpoveď nebude textová. (Ctrl + Enter)">
<div id="hint">Tento priestor neposkytuje odpovede. Ukazuje dôsledky otázok.</div>
<div id="mode">MODE: IMPULSE</div>

<script>
const canvas = document.getElementById("field");
const ctx = canvas.getContext("2d");

function resize(){
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
}
window.addEventListener("resize",resize);
resize();

/* === AXIOMATICKÉ ŤAŽISKÁ Σ₁…Σ₈ === */
const AXIOMS = [
  {id:"INT", angle:0},
  {id:"LEX", angle:Math.PI/4},
  {id:"VER", angle:Math.PI/2},
  {id:"LIB", angle:3*Math.PI/4},
  {id:"UNI", angle:Math.PI},
  {id:"REL", angle:5*Math.PI/4},
  {id:"WIS", angle:3*Math.PI/2},
  {id:"CRE", angle:7*Math.PI/4}
].map(a=>({
  ...a,
  tension:0.06,
  phase:Math.random()*Math.PI*2,
  inertia:0.003+Math.random()*0.004,
  impulse:0
}));

/* === IMPULZ Z OTÁZKY === */
document.getElementById("ask").addEventListener("keydown",e=>{
  if(e.key==="Enter" && e.ctrlKey){
    const strength=Math.min(1,e.target.value.length/60);
    AXIOMS.forEach(a=>{
      a.impulse += strength*(0.4+Math.random()*0.6);
    });
    e.target.value="";
  }
});

/* === RENDER LOOP — ŽIVÉ POLE === */
function draw(){
  ctx.clearRect(0,0,canvas.width,canvas.height);

  const cx=canvas.width/2;
  const cy=canvas.height/2;
  const R=Math.min(cx,cy)*0.55;

  /* aktualizácia stavov */
  AXIOMS.forEach(a=>{
    a.phase += a.inertia + a.impulse*0.02;
    a.tension += Math.sin(a.phase)*0.0009;
    a.tension += a.impulse*0.002;
    a.impulse *= 0.92;

    a.tension=Math.max(0.02,Math.min(0.22,a.tension));
  });

  /* kreslenie tenzných vzťahov */
  for(let i=0;i<AXIOMS.length;i++){
    for(let j=i+1;j<AXIOMS.length;j++){
      const A=AXIOMS[i], B=AXIOMS[j];
      const t=(A.tension+B.tension)/2;
      if(t<0.025) continue;

      const ax=cx+Math.cos(A.angle)*R;
      const ay=cy+Math.sin(A.angle)*R;
      const bx=cx+Math.cos(B.angle)*R;
      const by=cy+Math.sin(B.angle)*R;

      const wave=Math.sin(A.phase+B.phase)*R*0.15*t;
      const mx=(ax+bx)/2 + Math.cos(A.angle)*wave;
      const my=(ay+by)/2 + Math.sin(B.angle)*wave;

      ctx.beginPath();
      ctx.moveTo(ax,ay);
      ctx.quadraticCurveTo(mx,my,bx,by);
      ctx.strokeStyle=`rgba(180,200,255,${0.15+t*0.9})`;
      ctx.lineWidth=0.6+t*2.6;
      ctx.stroke();
    }
  }

  requestAnimationFrame(draw);
}

draw();
</script>
</body>
</html>
