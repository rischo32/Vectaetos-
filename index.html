<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>VECTAETOS — Epistemic Field</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<style>
html, body {
  margin: 0;
  padding: 0;
  overflow: hidden;
  background: #000;
  color: #ddd;
  font-family: system-ui, sans-serif;
}

/* --- Overlay ritual layer --- */
#gate {
  position: fixed;
  inset: 0;
  background: radial-gradient(circle at center, #0a0a0a, #000);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 10;
}

#gate-inner {
  width: min(90%, 420px);
  text-align: center;
  opacity: 0;
  animation: fadeIn 4s ease forwards;
}

#gate-inner p {
  font-size: 14px;
  line-height: 1.6;
  opacity: 0.8;
}

#gate-inner input {
  width: 100%;
  margin-top: 20px;
  padding: 10px;
  background: transparent;
  border: 1px solid #333;
  color: #ccc;
  outline: none;
}

#gate-inner button {
  margin-top: 20px;
  padding: 10px 20px;
  background: transparent;
  border: 1px solid #555;
  color: #aaa;
  cursor: pointer;
}

#gate-inner button:hover {
  border-color: #888;
  color: #fff;
}

@keyframes fadeIn {
  to { opacity: 1; }
}

/* --- Answer whisper --- */
#whisper {
  position: fixed;
  bottom: 40px;
  left: 50%;
  transform: translateX(-50%);
  font-size: 13px;
  opacity: 0;
  pointer-events: none;
  transition: opacity 4s ease;
}
</style>
</head>

<body>

<!-- ================= 3GATE ================= -->

<div id="gate">
  <div id="gate-inner">
    <p>
      You are approaching a field.<br>
      Not a system. Not an answer.
    </p>

    <input id="question" placeholder="What brings you here?" />

    <button onclick="enterField()">Enter</button>
  </div>
</div>

<div id="whisper">
  The field is still becoming.<br>
  And so are you — whether you know it or not.
</div>

<!-- ================= THREE.JS ================= -->

<script src="https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.160.0/examples/js/controls/OrbitControls.js"></script>

<script>
/* =========================
   SCENE
========================= */
const scene = new THREE.Scene();
scene.background = new THREE.Color(0x000000);

const camera = new THREE.PerspectiveCamera(55, innerWidth / innerHeight, 0.1, 1000);
camera.position.set(0, 0, 18);

const renderer = new THREE.WebGLRenderer({ antialias: true });
renderer.setSize(innerWidth, innerHeight);
renderer.setPixelRatio(devicePixelRatio);
document.body.appendChild(renderer.domElement);

/* =========================
   CONTROLS — slow observer
========================= */
const controls = new THREE.OrbitControls(camera, renderer.domElement);
controls.enableDamping = true;
controls.dampingFactor = 0.04;
controls.enablePan = false;
controls.rotateSpeed = 0.15;
controls.zoomSpeed = 0.3;

/* =========================
   LIGHT
========================= */
scene.add(new THREE.AmbientLight(0xffffff, 0.25));

const p = new THREE.PointLight(0xffffff, 0.6);
p.position.set(10, 10, 10);
scene.add(p);

/* =========================
   AXIOMS + RUNES
========================= */

const AXIOMS = [
  { key:"INT", c:0xff5555, p:[ 6,0,0] },
  { key:"LEX", c:0xffc857, p:[ 3,4,3] },
  { key:"VER", c:0x5ad1ff, p:[ 0,6,0] },
  { key:"LIB", c:0x5aff9d, p:[-3,4,-3] },
  { key:"UNI", c:0xff9df0, p:[-6,0,0] },
  { key:"REL", c:0x9d9dff, p:[-3,-4,3] },
  { key:"WIS", c:0xffa15a, p:[0,-6,0] },
  { key:"CRE", c:0x9dfffa, p:[3,-4,-3] }
];

const runePhases = ["◯","◇","△","⌓"];
let phaseIndex = 0;

const nodes = [];
const geom = new THREE.SphereGeometry(0.45, 32, 32);

AXIOMS.forEach(a => {
  const mat = new THREE.MeshStandardMaterial({
    color: a.c,
    emissive: a.c,
    emissiveIntensity: 0.25
  });
  const m = new THREE.Mesh(geom, mat);
  m.position.set(...a.p);
  scene.add(m);
  nodes.push(m);
});

/* =========================
   TENSION LINES (colored)
========================= */
nodes.forEach((n,i)=>{
  nodes.forEach((m,j)=>{
    if(i>=j) return;
    const g = new THREE.BufferGeometry().setFromPoints([n.position, m.position]);
    const col = new THREE.Color().lerpColors(
      new THREE.Color(AXIOMS[i].c),
      new THREE.Color(AXIOMS[j].c),
      0.5
    );
    const l = new THREE.Line(
      g,
      new THREE.LineBasicMaterial({ color: col, opacity:0.35, transparent:true })
    );
    scene.add(l);
  });
});

/* =========================
   ANIMATION — field lives
========================= */
let t = 0;
function animate(){
  requestAnimationFrame(animate);
  t += 0.002;

  nodes.forEach((n,i)=>{
    const s = 1 + Math.sin(t+i)*0.04;
    n.scale.set(s,s,s);
  });

  controls.update();
  renderer.render(scene,camera);
}
animate();

/* =========================
   3GATE LOGIC
========================= */
function enterField(){
  document.getElementById("gate").style.opacity = 0;
  setTimeout(()=>document.getElementById("gate").remove(),2000);
  setTimeout(()=>document.getElementById("whisper").style.opacity=0.6,2500);

  // runic phase shift
  setInterval(()=>{
    phaseIndex = (phaseIndex+1)%runePhases.length;
  },8000);
}

/* =========================
   RESIZE
========================= */
addEventListener("resize",()=>{
  camera.aspect = innerWidth/innerHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(innerWidth,innerHeight);
});
</script>

</body>
</html>
