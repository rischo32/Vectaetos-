<!DOCTYPE html>
<html lang="sk">
<head>
<meta charset="UTF-8">
<title>Φ</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body{
  margin:0;
  background:#0a0a0a;
  font-family:system-ui,-apple-system,BlinkMacSystemFont,sans-serif;
  overflow:hidden;
}
canvas{ display:block; }
.top{
  position:absolute;
  top:20px;
  width:100%;
  text-align:center;
  font-size:36px;
  font-weight:500;
  color:#fff;
  letter-spacing:2px;
}
.bottom{
  position:absolute;
  bottom:20px;
  width:100%;
  text-align:center;
  font-size:14px;
}
.bottom a{
  color:#aaa;
  text-decoration:none;
  margin:0 12px;
}
.bottom a:hover{
  color:#fff;
}
</style>
</head>
<body>

<div class="top">Φ</div>
<canvas id="field"></canvas>

<div class="bottom">
  <a href="https://github.com/rischo32/Vectaetos" target="_blank">Repository</a>
  |
  <a href="https://zenodo.org/records/18395048" target="_blank">DOI</a>
</div>

<script>
const canvas = document.getElementById("field");
const ctx = canvas.getContext("2d");

function resize(){
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
}
resize();
window.addEventListener("resize", resize);

/* ===============================
   8 AXIOMATICKÉ ŤAŽISKÁ
   =============================== */

const AXIOMS = [
  {label:"INT",color:"#ff3366"},
  {label:"LEX",color:"#ffaa00"},
  {label:"VER",color:"#33ccff"},
  {label:"LIB",color:"#66ff66"},
  {label:"UNI",color:"#aa66ff"},
  {label:"REL",color:"#00ffaa"},
  {label:"WIS",color:"#ff44aa"},
  {label:"CRE",color:"#9c27b0"}
];

let t = 0;

/* ===============================
   GEOMETRIA – KONŠTANTNÝ KRUH
   =============================== */

function computeNodes(){
  const cx = canvas.width/2;
  const cy = canvas.height/2;
  const radius = Math.min(canvas.width,canvas.height)*0.35;

  let nodes = [];

  for(let i=0;i<AXIOMS.length;i++){
    const angle = (Math.PI*2/AXIOMS.length)*i - Math.PI/2;
    const x = cx + Math.cos(angle)*radius;
    const y = cy + Math.sin(angle)*radius;
    nodes.push({x,y});
  }

  return nodes;
}

/* ===============================
   SYMETRICKÁ TENZIA
   w_ij = w_ji
   ŽIADNA NORMALIZÁCIA
   =============================== */

function tensionWeight(i,j){
  // Symetrická funkcia – nezávislá od poradia
  const phase = i + j;
  const value = 0.5 + 0.5*Math.sin(t*0.02 + phase);
  return value; // v rozsahu 0–1
}

/* ===============================
   RENDER
   =============================== */

function draw(){
  ctx.clearRect(0,0,canvas.width,canvas.height);

  const nodes = computeNodes();

  // HRANY (symetrické)
  for(let i=0;i<nodes.length;i++){
    for(let j=i+1;j<nodes.length;j++){

      const n1 = nodes[i];
      const n2 = nodes[j];

      const w = tensionWeight(i,j);

      ctx.lineWidth = 1 + w*4;

      // farebný prechod medzi dvoma uzlami
      const gradient = ctx.createLinearGradient(n1.x,n1.y,n2.x,n2.y);
      gradient.addColorStop(0, AXIOMS[i].color);
      gradient.addColorStop(1, AXIOMS[j].color);

      ctx.strokeStyle = gradient;
      ctx.globalAlpha = 0.15 + w*0.35;

      ctx.beginPath();

      // mierna krivka – symetrická
      const mx = (n1.x+n2.x)/2;
      const my = (n1.y+n2.y)/2;
      const curveOffset = Math.sin(t*0.015 + i + j) * 25;

      const dx = n2.y - n1.y;
      const dy = n1.x - n2.x;
      const length = Math.sqrt(dx*dx + dy*dy);

      const nx = dx/length;
      const ny = dy/length;

      ctx.moveTo(n1.x,n1.y);
      ctx.quadraticCurveTo(
        mx + nx*curveOffset,
        my + ny*curveOffset,
        n2.x,n2.y
      );
      ctx.stroke();
    }
  }

  ctx.globalAlpha = 1;

  // UZLY (konštantná vzdialenosť, bez posunu)
  for(let i=0;i<nodes.length;i++){
    ctx.fillStyle = AXIOMS[i].color;
    ctx.beginPath();
    ctx.arc(nodes[i].x,nodes[i].y,10,0,Math.PI*2);
    ctx.fill();

    ctx.fillStyle = "#ffffff";
    ctx.font = "12px system-ui";
    ctx.textAlign = "center";
    ctx.fillText(AXIOMS[i].label, nodes[i].x, nodes[i].y - 18);
  }

  t++;
  requestAnimationFrame(draw);
}

draw();
</script>

</body>
</html>
